import{rectToClientRect as t,computePosition as e}from"@floating-ui/core";export{arrow,autoPlacement,detectOverflow,flip,hide,inline,limitShift,offset,shift,size}from"@floating-ui/core";function n(t){var e;return(null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function o(e){return n(e).getComputedStyle(e)}function i(e){return e instanceof n(e).Node}function r(e){return i(e)?(e.nodeName||"").toLowerCase():""}function l(e){return e instanceof n(e).HTMLElement}function c(e){return e instanceof n(e).Element}function s(e){return"undefined"!=typeof ShadowRoot&&(e instanceof n(e).ShadowRoot||e instanceof ShadowRoot)}function f(e){const{overflow:t,overflowX:n,overflowY:s,display:i}=o(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(i)}function u(e){return["table","td","th"].includes(r(e))}function a(n){const t=d(),e=o(n);return"none"!==e.transform||"none"!==e.perspective||!t&&!!e.backdropFilter&&"none"!==e.backdropFilter||!t&&!!e.filter&&"none"!==e.filter||["transform","perspective","filter"].some(t=>(e.willChange||"").includes(t))||["paint","layout","strict","content"].some(t=>(e.contain||"").includes(t))}function d(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function h(e){return["html","body","#document"].includes(r(e))}const p=Math.min,m=Math.max,g=Math.round;function y(e){const s=o(e);let t=parseFloat(s.width)||0,n=parseFloat(s.height)||0;const i=l(e),a=i?e.offsetWidth:t,r=i?e.offsetHeight:n,c=g(t)!==a||g(n)!==r;return c&&(t=a,n=r),{width:t,height:n,fallback:c}}function x(e){return c(e)?e:e.contextElement}const w={x:1,y:1};function v(r){const s=x(r);if(!l(s))return w;const n=s.getBoundingClientRect(),{width:i,height:a,fallback:o}=y(s);let e=(o?g(n.width):n.width)/i,t=(o?g(n.height):n.height)/a;return e&&Number.isFinite(e)||(e=1),t&&Number.isFinite(t)||(t=1),{x:e,y:t}}const b={x:0,y:0};function L(s,e,o){var i,a;if(void 0===e&&(e=!0),!d())return b;const t=s?n(s):window;return!o||e&&o!==t?b:{x:(null==(i=t.visualViewport)?void 0:i.offsetLeft)||0,y:(null==(a=t.visualViewport)?void 0:a.offsetTop)||0}}function E(l,i,a,e){void 0===i&&(i=!1),void 0===a&&(a=!1);const o=l.getBoundingClientRect(),r=x(l);let s=w;i&&(e?c(e)&&(s=v(e)):s=v(l));const h=L(r,a,e);let d=(o.left+h.x)/s.x,u=(o.top+h.y)/s.y,m=o.width/s.x,f=o.height/s.y;if(r){const s=n(r),o=e&&c(e)?n(e):e;let t=s.frameElement;for(;t&&e&&o!==s;){const i=v(t),a=t.getBoundingClientRect(),r=getComputedStyle(t);a.x+=(t.clientLeft+parseFloat(r.paddingLeft))*i.x,a.y+=(t.clientTop+parseFloat(r.paddingTop))*i.y,d*=i.x,u*=i.y,m*=i.x,f*=i.y,d+=a.x,u+=a.y,t=n(t).frameElement}}return t({width:m,height:f,x:d,y:u})}function R(e){return((i(e)?e.ownerDocument:e.document)||window.document).documentElement}function T(e){return c(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function S(e){return E(R(e)).left+T(e).scrollLeft}function C(e){if("html"===r(e))return e;const t=e.assignedSlot||e.parentNode||s(e)&&e.host||R(e);return s(t)?t.host:t}function F(t){const e=C(t);return h(e)?e.ownerDocument.body:l(e)&&f(e)?e:F(e)}function W(s,t){var o;void 0===t&&(t=[]);const e=F(s),a=e===(null==(o=s.ownerDocument)?void 0:o.body),i=n(e);return a?t.concat(i,i.visualViewport||[],f(e)?e:[]):t.concat(e,W(e))}function D(i,e,a){let s;if("viewport"===e)s=function(t,c){const l=n(t),i=R(t),e=l.visualViewport;let a=i.clientWidth,r=i.clientHeight,s=0,o=0;if(e){a=e.width,r=e.height;const t=d();(!t||t&&"fixed"===c)&&(s=e.offsetLeft,o=e.offsetTop)}return{width:a,height:r,x:s,y:o}}(i,a);else if("document"===e)s=function(n){const t=R(n),s=T(n),e=n.ownerDocument.body,i=m(t.scrollWidth,t.clientWidth,e.scrollWidth,e.clientWidth),r=m(t.scrollHeight,t.clientHeight,e.scrollHeight,e.clientHeight);let a=-s.scrollLeft+S(n);const c=-s.scrollTop;return"rtl"===o(e).direction&&(a+=m(t.clientWidth,e.clientWidth)-i),{width:i,height:r,x:a,y:c}}(R(i));else if(c(e))s=function(e,s){const n=E(e,!0,"fixed"===s),o=n.top+e.clientTop,i=n.left+e.clientLeft,t=l(e)?v(e):{x:1,y:1};return{width:e.clientWidth*t.x,height:e.clientHeight*t.y,x:i*t.x,y:o*t.y}}(e,a);else{const t=L(i);s={...e,x:e.x-t.x,y:e.y-t.y}}return t(s)}function H(n,t){const e=C(n);return!(e===t||!c(e)||h(e))&&("fixed"===o(e).position||H(e,t))}function O(e,t){return l(e)&&"fixed"!==o(e).position?t?t(e):e.offsetParent:null}function P(t,i){const s=n(t);if(!l(t))return s;let e=O(t,i);for(;e&&u(e)&&"static"===o(e).position;)e=O(e,i);return e&&("html"===r(e)||"body"===r(e)&&"static"===o(e).position&&!a(e))?s:e||function(t){let e=C(t);for(;l(e)&&!h(e);){if(a(e))return e;e=C(e)}return null}(t)||s}function V(c,e,d){const a=l(e),s=R(e),o="fixed"===d,n=E(c,!0,o,e);let i={scrollLeft:0,scrollTop:0};const t={x:0,y:0};if(a||!a&&!o)if(("body"!==r(e)||f(s))&&(i=T(e)),l(e)){const n=E(e,!0,o,e);t.x=n.x+e.clientLeft,t.y=n.y+e.clientTop}else s&&(t.x=S(s));return{x:n.left+i.scrollLeft-t.x,y:n.top+i.scrollTop-t.y,width:n.width,height:n.height}}const k={getClippingRect:function(u){let{element:t,boundary:i,rootBoundary:l,strategy:s}=u;const d="clippingAncestors"===i?function(t,i){const l=i.get(t);if(l)return l;let s=W(t).filter(e=>c(e)&&"body"!==r(e)),n=null;const d="fixed"===o(t).position;let e=d?C(t):t;for(;c(e)&&!h(e);){const r=o(e),i=a(e);i||"fixed"!==r.position||(n=null),(d?!i&&!n:!i&&"static"===r.position&&n&&["absolute","fixed"].includes(n.position)||f(e)&&!i&&H(t,e))?s=s.filter(t=>t!==e):n=r,e=C(e)}return i.set(t,s),s}(t,this._c):[].concat(i),n=[...d,l],g=n[0],e=n.reduce((e,o)=>{const n=D(t,o,s);return e.top=m(n.top,e.top),e.right=p(n.right,e.right),e.bottom=p(n.bottom,e.bottom),e.left=m(n.left,e.left),e},D(t,g,s));return{width:e.right-e.left,height:e.bottom-e.top,x:e.left,y:e.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(d){let{rect:n,offsetParent:e,strategy:c}=d;const i=l(e),a=R(e);if(e===a)return n;let o={scrollLeft:0,scrollTop:0},t={x:1,y:1};const s={x:0,y:0};if((i||!i&&"fixed"!==c)&&(("body"!==r(e)||f(a))&&(o=T(e)),l(e))){const n=E(e);t=v(e),s.x=n.x+e.clientLeft,s.y=n.y+e.clientTop}return{width:n.width*t.x,height:n.height*t.y,x:n.x*t.x-o.scrollLeft*t.x+s.x,y:n.y*t.y-o.scrollTop*t.y+s.y}},isElement:c,getDimensions:function(e){return y(e)},getOffsetParent:P,getDocumentElement:R,getScale:v,async getElementRects(t){let{reference:n,floating:e,strategy:s}=t;const o=this.getOffsetParent||P,i=this.getDimensions;return{reference:V(n,await o(e),s),floating:{x:0,y:0,...await i(e)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>"rtl"===o(e).direction};function z(e,l,t,i){void 0===i&&(i={});const{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:h=!0,animationFrame:n=!1}=i,d=a||r?[...c(e)?W(e):e.contextElement?W(e.contextElement):[],...W(l)]:[];d.forEach(e=>{const s=!c(e)&&e.toString().includes("V");!a||n&&!s||e.addEventListener("scroll",t,{passive:!0}),r&&e.addEventListener("resize",t)});let u,s=null;h&&(s=new ResizeObserver(()=>{t()}),c(e)&&!n&&s.observe(e),c(e)||!e.contextElement||n||s.observe(e.contextElement),s.observe(l));let o=n?E(e):null;return n&&function s(){const n=E(e);!o||n.x===o.x&&n.y===o.y&&n.width===o.width&&n.height===o.height||t(),o=n,u=requestAnimationFrame(s)}(),t(),()=>{var e;d.forEach(e=>{a&&e.removeEventListener("scroll",t),r&&e.removeEventListener("resize",t)}),null==(e=s)||e.disconnect(),s=null,n&&cancelAnimationFrame(u)}}const M=(n,s,o)=>{const i=new Map,t={platform:k,...o},a={...t.platform,_c:i};return e(n,s,{...t,platform:a})};export{z as autoUpdate,M as computePosition,W as getOverflowAncestors,k as platform}