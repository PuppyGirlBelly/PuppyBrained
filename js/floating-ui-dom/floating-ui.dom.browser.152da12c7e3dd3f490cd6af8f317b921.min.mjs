import{rectToClientRect,computePosition as computePosition$1}from"@floating-ui/core";export{arrow,autoPlacement,detectOverflow,flip,hide,inline,limitShift,offset,shift,size}from"@floating-ui/core";function getWindow(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function getComputedStyle$1(e){return getWindow(e).getComputedStyle(e)}function isNode(e){return e instanceof getWindow(e).Node}function getNodeName(e){return isNode(e)?(e.nodeName||'').toLowerCase():''}function isHTMLElement(e){return e instanceof getWindow(e).HTMLElement}function isElement(e){return e instanceof getWindow(e).Element}function isShadowRoot(e){if(typeof ShadowRoot=="undefined")return!1;const t=getWindow(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function isOverflowElement(e){const{overflow:t,overflowX:n,overflowY:s,display:o}=getComputedStyle$1(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(o)}function isTableElement(e){return["table","td","th"].includes(getNodeName(e))}function isContainingBlock(n){const t=isSafari(),e=getComputedStyle$1(n);return e.transform!=="none"||e.perspective!=="none"||!t&&(!!e.backdropFilter&&e.backdropFilter!=="none")||!t&&(!!e.filter&&e.filter!=="none")||["transform","perspective","filter"].some(t=>(e.willChange||'').includes(t))||["paint","layout","strict","content"].some(t=>(e.contain||'').includes(t))}function isSafari(){return!(typeof CSS=="undefined"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(e){return["html","body","#document"].includes(getNodeName(e))}const min=Math.min,max=Math.max,round=Math.round;function getCssDimensions(e){const s=getComputedStyle$1(e);let t=parseFloat(s.width)||0,n=parseFloat(s.height)||0;const o=isHTMLElement(e),i=o?e.offsetWidth:t,a=o?e.offsetHeight:n,r=round(t)!==i||round(n)!==a;return r&&(t=i,n=a),{width:t,height:n,fallback:r}}function unwrapElement(e){return isElement(e)?e:e.contextElement}const FALLBACK_SCALE={x:1,y:1};function getScale(r){const s=unwrapElement(r);if(!isHTMLElement(s))return FALLBACK_SCALE;const n=s.getBoundingClientRect(),{width:i,height:a,fallback:o}=getCssDimensions(s);let e=(o?round(n.width):n.width)/i,t=(o?round(n.height):n.height)/a;return(!e||!Number.isFinite(e))&&(e=1),(!t||!Number.isFinite(t))&&(t=1),{x:e,y:t}}const noOffsets={x:0,y:0};function getVisualOffsets(n,e,s){var o,i;if(e===void 0&&(e=!0),!isSafari())return noOffsets;const t=n?getWindow(n):window;return!s||e&&s!==t?noOffsets:{x:((o=t.visualViewport)==null?void 0:o.offsetLeft)||0,y:((i=t.visualViewport)==null?void 0:i.offsetTop)||0}}function getBoundingClientRect(a,s,o,e){s===void 0&&(s=!1),o===void 0&&(o=!1);const n=a.getBoundingClientRect(),i=unwrapElement(a);let t=FALLBACK_SCALE;s&&(e?isElement(e)&&(t=getScale(e)):t=getScale(a));const l=getVisualOffsets(i,o,e);let r=(n.left+l.x)/t.x,c=(n.top+l.y)/t.y,d=n.width/t.x,u=n.height/t.y;if(i){const n=getWindow(i),s=e&&isElement(e)?getWindow(e):e;let t=n.frameElement;for(;t&&e&&s!==n;){const e=getScale(t),n=t.getBoundingClientRect(),s=getComputedStyle(t);n.x+=(t.clientLeft+parseFloat(s.paddingLeft))*e.x,n.y+=(t.clientTop+parseFloat(s.paddingTop))*e.y,r*=e.x,c*=e.y,d*=e.x,u*=e.y,r+=n.x,c+=n.y,t=getWindow(t).frameElement}}return rectToClientRect({width:d,height:u,x:r,y:c})}function getDocumentElement(e){return((isNode(e)?e.ownerDocument:e.document)||window.document).documentElement}function getNodeScroll(e){return isElement(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function convertOffsetParentRelativeRectToViewportRelativeRect(c){let{rect:n,offsetParent:e,strategy:r}=c;const i=isHTMLElement(e),a=getDocumentElement(e);if(e===a)return n;let o={scrollLeft:0,scrollTop:0},t={x:1,y:1};const s={x:0,y:0};if(i||!i&&r!=="fixed")if((getNodeName(e)!=="body"||isOverflowElement(a))&&(o=getNodeScroll(e)),isHTMLElement(e)){const n=getBoundingClientRect(e);t=getScale(e),s.x=n.x+e.clientLeft,s.y=n.y+e.clientTop}return{width:n.width*t.x,height:n.height*t.y,x:n.x*t.x-o.scrollLeft*t.x+s.x,y:n.y*t.y-o.scrollTop*t.y+s.y}}function getWindowScrollBarX(e){return getBoundingClientRect(getDocumentElement(e)).left+getNodeScroll(e).scrollLeft}function getDocumentRect(n){const t=getDocumentElement(n),s=getNodeScroll(n),e=n.ownerDocument.body,o=max(t.scrollWidth,t.clientWidth,e.scrollWidth,e.clientWidth),a=max(t.scrollHeight,t.clientHeight,e.scrollHeight,e.clientHeight);let i=-s.scrollLeft+getWindowScrollBarX(n);const r=-s.scrollTop;return getComputedStyle$1(e).direction==="rtl"&&(i+=max(t.clientWidth,e.clientWidth)-o),{width:o,height:a,x:i,y:r}}function getParentNode(e){if(getNodeName(e)==="html")return e;const t=e.assignedSlot||e.parentNode||isShadowRoot(e)&&e.host||getDocumentElement(e);return isShadowRoot(t)?t.host:t}function getNearestOverflowAncestor(t){const e=getParentNode(t);return isLastTraversableNode(e)?e.ownerDocument.body:isHTMLElement(e)&&isOverflowElement(e)?e:getNearestOverflowAncestor(e)}function getOverflowAncestors(n,t){var s;t===void 0&&(t=[]);const e=getNearestOverflowAncestor(n),i=e===((s=n.ownerDocument)==null?void 0:s.body),o=getWindow(e);return i?t.concat(o,o.visualViewport||[],isOverflowElement(e)?e:[]):t.concat(e,getOverflowAncestors(e))}function getViewportRect(t,r){const c=getWindow(t),o=getDocumentElement(t),e=c.visualViewport;let i=o.clientWidth,a=o.clientHeight,n=0,s=0;if(e){i=e.width,a=e.height;const t=isSafari();(!t||t&&r==="fixed")&&(n=e.offsetLeft,s=e.offsetTop)}return{width:i,height:a,x:n,y:s}}function getInnerBoundingClientRect(e,s){const n=getBoundingClientRect(e,!0,s==="fixed"),o=n.top+e.clientTop,i=n.left+e.clientLeft,t=isHTMLElement(e)?getScale(e):{x:1,y:1},a=e.clientWidth*t.x,r=e.clientHeight*t.y,c=i*t.x,l=o*t.y;return{width:a,height:r,x:c,y:l}}function getClientRectFromClippingAncestor(n,e,s){let t;if(e==="viewport")t=getViewportRect(n,s);else if(e==="document")t=getDocumentRect(getDocumentElement(n));else if(isElement(e))t=getInnerBoundingClientRect(e,s);else{const s=getVisualOffsets(n);t={...e,x:e.x-s.x,y:e.y-s.y}}return rectToClientRect(t)}function hasFixedPositionAncestor(n,t){const e=getParentNode(n);return!(e===t||!isElement(e)||isLastTraversableNode(e))&&(getComputedStyle$1(e).position==="fixed"||hasFixedPositionAncestor(e,t))}function getClippingElementAncestors(t,o){const i=o.get(t);if(i)return i;let s=getOverflowAncestors(t).filter(e=>isElement(e)&&getNodeName(e)!=="body"),n=null;const a=getComputedStyle$1(t).position==="fixed";let e=a?getParentNode(t):t;for(;isElement(e)&&!isLastTraversableNode(e);){const i=getComputedStyle$1(e),o=isContainingBlock(e);!o&&i.position==="fixed"&&(n=null);const r=a?!o&&!n:!o&&i.position==="static"&&!!n&&["absolute","fixed"].includes(n.position)||isOverflowElement(e)&&!o&&hasFixedPositionAncestor(t,e);r?s=s.filter(t=>t!==e):n=i,e=getParentNode(e)}return o.set(t,s),s}function getClippingRect(r){let{element:t,boundary:o,rootBoundary:i,strategy:s}=r;const a=o==="clippingAncestors"?getClippingElementAncestors(t,this._c):[].concat(o),n=[...a,i],c=n[0],e=n.reduce((e,o)=>{const n=getClientRectFromClippingAncestor(t,o,s);return e.top=max(n.top,e.top),e.right=min(n.right,e.right),e.bottom=min(n.bottom,e.bottom),e.left=max(n.left,e.left),e},getClientRectFromClippingAncestor(t,c,s));return{width:e.right-e.left,height:e.bottom-e.top,x:e.left,y:e.top}}function getDimensions(e){return getCssDimensions(e)}function getTrueOffsetParent(e,t){return!isHTMLElement(e)||getComputedStyle$1(e).position==="fixed"?null:t?t(e):e.offsetParent}function getContainingBlock(t){let e=getParentNode(t);for(;isHTMLElement(e)&&!isLastTraversableNode(e);){if(isContainingBlock(e))return e;e=getParentNode(e)}return null}function getOffsetParent(t,s){const n=getWindow(t);if(!isHTMLElement(t))return n;let e=getTrueOffsetParent(t,s);for(;e&&isTableElement(e)&&getComputedStyle$1(e).position==="static";)e=getTrueOffsetParent(e,s);return e&&(getNodeName(e)==="html"||getNodeName(e)==="body"&&getComputedStyle$1(e).position==="static"&&!isContainingBlock(e))?n:e||getContainingBlock(t)||n}function getRectRelativeToOffsetParent(r,e,c){const a=isHTMLElement(e),s=getDocumentElement(e),o=c==="fixed",n=getBoundingClientRect(r,!0,o,e);let i={scrollLeft:0,scrollTop:0};const t={x:0,y:0};if(a||!a&&!o)if((getNodeName(e)!=="body"||isOverflowElement(s))&&(i=getNodeScroll(e)),isHTMLElement(e)){const n=getBoundingClientRect(e,!0,o,e);t.x=n.x+e.clientLeft,t.y=n.y+e.clientTop}else s&&(t.x=getWindowScrollBarX(s));return{x:n.left+i.scrollLeft-t.x,y:n.top+i.scrollTop-t.y,width:n.width,height:n.height}}const platform={getClippingRect,convertOffsetParentRelativeRectToViewportRelativeRect,isElement,getDimensions,getOffsetParent,getDocumentElement,getScale,async getElementRects(t){let{reference:n,floating:e,strategy:s}=t;const o=this.getOffsetParent||getOffsetParent,i=this.getDimensions;return{reference:getRectRelativeToOffsetParent(n,await o(e),s),floating:{x:0,y:0,...await i(e)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>getComputedStyle$1(e).direction==="rtl"};function autoUpdate(e,u,t,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:r=!0,elementResize:h=!0,animationFrame:o=!1}=i,l=a||r?[...isElement(e)?getOverflowAncestors(e):e.contextElement?getOverflowAncestors(e.contextElement):[],...getOverflowAncestors(u)]:[];l.forEach(e=>{const n=!isElement(e)&&e.toString().includes("V");a&&(!o||n)&&e.addEventListener("scroll",t,{passive:!0}),r&&e.addEventListener("resize",t)});let s=null;h&&(s=new ResizeObserver(()=>{t()}),isElement(e)&&!o&&s.observe(e),!isElement(e)&&e.contextElement&&!o&&s.observe(e.contextElement),s.observe(u));let d,n=o?getBoundingClientRect(e):null;o&&c();function c(){const s=getBoundingClientRect(e);n&&(s.x!==n.x||s.y!==n.y||s.width!==n.width||s.height!==n.height)&&t(),n=s,d=requestAnimationFrame(c)}return t(),()=>{var e;l.forEach(e=>{a&&e.removeEventListener("scroll",t),r&&e.removeEventListener("resize",t)}),(e=s)==null?void 0:e.disconnect(),s=null,o&&cancelAnimationFrame(d)}}const computePosition=(t,n,s)=>{const o=new Map,e={platform,...s},i={...e.platform,_c:o};return computePosition$1(t,n,{...e,platform:i})};export{autoUpdate,computePosition,getOverflowAncestors,platform}