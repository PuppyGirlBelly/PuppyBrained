(function(e,t){typeof exports=="object"&&typeof module!="undefined"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e.FloatingUICore={}))})(this,function(t){'use strict';function n(e){return e.split("-")[1]}function m(e){return e==="y"?"height":"width"}function e(e){return e.split("-")[0]}function i(t){return["top","bottom"].includes(e(t))?"x":"y"}function f(g,r,d){let{reference:t,floating:o}=g;const l=t.x+t.width/2-o.width/2,c=t.y+t.height/2-o.height/2,a=i(r),u=m(a),h=t[u]/2-o[u]/2,p=e(r),f=a==="x";let s;switch(p){case"top":s={x:l,y:t.y-o.height};break;case"bottom":s={x:l,y:t.y+t.height};break;case"right":s={x:t.x+t.width,y:c};break;case"left":s={x:t.x-o.width,y:c};break;default:s={x:t.x,y:t.y}}switch(n(r)){case"start":s[a]-=h*(d&&f?-1:1);break;case"end":s[a]+=h*(d&&f?-1:1);break}return s}const R=async(c,o,p)=>{const{placement:l="bottom",strategy:a="absolute",middleware:m=[],platform:n}=p,d=m.filter(Boolean),u=await(n.isRTL==null?void 0:n.isRTL(o));let i=await n.getElementRects({reference:c,floating:o,strategy:a}),{x:e,y:s}=f(i,l,u),r=l,t={},h=0;for(let p=0;p<d.length;p++){const{name:g,fn:j}=d[p],{x:v,y:b,data:y,reset:m}=await j({x:e,y:s,initialPlacement:l,placement:r,strategy:a,middlewareData:t,rects:i,platform:n,elements:{reference:c,floating:o}});if(e=v??e,s=b??s,t={...t,[g]:{...t[g],...y}},m&&h<=50){h++,typeof m=="object"&&(m.placement&&(r=m.placement),m.rects&&(i=m.rects===!0?await n.getElementRects({reference:c,floating:o,strategy:a}):m.rects),{x:e,y:s}=f(i,r,u)),p=-1;continue}}return{x:e,y:s,placement:r,strategy:a,middlewareData:t}};function s(e,t){return typeof e=="function"?e(t):e}function N(e){return{top:0,right:0,bottom:0,left:0,...e}}function u(e){return typeof e!="number"?N(e):{top:e,right:e,bottom:e,left:e}}function c(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function r(g,a){var v;a===void 0&&(a={});const{x:O,y:_,platform:e,rects:m,elements:d,strategy:p}=g,{boundary:b="clippingAncestors",rootBoundary:y="viewport",elementContext:h="floating",altBoundary:w=!1,padding:j=0}=s(a,g),i=u(j),x=h==="floating"?"reference":"floating",l=d[w?x:h],o=c(await e.getClippingRect({element:((v=await(e.isElement==null?void 0:e.isElement(l)))==null||v)?l:l.contextElement||await(e.getDocumentElement==null?void 0:e.getDocumentElement(d.floating)),boundary:b,rootBoundary:y,strategy:p})),f=h==="floating"?{...m.floating,x:O,y:_}:m.reference,r=await(e.getOffsetParent==null?void 0:e.getOffsetParent(d.floating)),n=await(e.isElement==null?void 0:e.isElement(r))?await(e.getScale==null?void 0:e.getScale(r))||{x:1,y:1}:{x:1,y:1},t=c(e.convertOffsetParentRelativeRectToViewportRelativeRect?await e.convertOffsetParentRelativeRectToViewportRelativeRect({rect:f,offsetParent:r,strategy:p}):f);return{top:(o.top-t.top+i.top)/n.y,bottom:(t.bottom-o.bottom+i.bottom)/n.y,left:(o.left-t.left+i.left)/n.x,right:(t.right-o.right+i.right)/n.x}}const a=Math.min,o=Math.max;function h(e,t,n){return o(e,a(t,n))}const w=e=>({name:"arrow",options:e,async fn(x){const{x:R,y:L,placement:A,rects:c,platform:l,elements:N}=x,{element:v,padding:D=0}=s(e,x)||{};if(v==null)return{};const _=u(D),j={x:R,y:L},t=i(A),o=m(t),f=await l.getDimensions(v),b=t==="y",z=b?"top":"left",S=b?"bottom":"right",C=b?"clientHeight":"clientWidth",T=c.reference[o]+c.reference[t]-j[t]-c.floating[o],F=j[t]-c.reference[t],y=await(l.getOffsetParent==null?void 0:l.getOffsetParent(v));let d=y?y[C]:0;(!d||!await(l.isElement==null?void 0:l.isElement(y)))&&(d=N.floating[C]||c.floating[o]);const M=T/2-F/2,k=d/2-f[o]/2-1,E=a(_[z],k),O=a(_[S],k),p=E,w=d-f[o]-O,r=d/2-f[o]/2+M,g=h(p,r,w),P=n(A)!=null&&r!=g&&c.reference[o]/2-(r<p?E:O)-f[o]/2<0,H=P?r<p?p-r:w-r:0;return{[t]:j[t]-H,data:{[t]:g,centerOffset:r-g}}}}),v=["top","right","bottom","left"],b=v.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),T={left:"right",right:"left",bottom:"top",top:"bottom"};function l(e){return e.replace(/left|right|bottom|top/g,e=>T[e])}function g(c,s,t){t===void 0&&(t=!1);const o=n(c),a=i(c),r=m(a);let e=a==="x"?o===(t?"end":"start")?"right":"left":o==="start"?"bottom":"top";return s.reference[r]>s.floating[r]&&(e=l(e)),{main:e,cross:l(e)}}const S={start:"end",end:"start"};function d(e){return e.replace(/start|end/g,e=>S[e])}function O(t,o,s){const i=t?[...s.filter(e=>n(e)===t),...s.filter(e=>n(e)!==t)]:s.filter(t=>e(t)===t);return i.filter(e=>!t||n(e)===t||(!!o&&d(e)!==e))}const x=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(c){var _,y,j;const{rects:F,middlewareData:f,placement:m,platform:h,elements:M}=c,{crossAxis:S=!1,alignment:p,allowedPlacements:l=b,autoAlignment:C=!0,...z}=s(t,c),a=p!==void 0||l===b?O(p||null,C,l):l,u=await r(c,z),i=((_=f.autoPlacement)==null?void 0:_.index)||0,o=a[i];if(o==null)return{};const{main:E,cross:k}=g(o,F,await(h.isRTL==null?void 0:h.isRTL(M.floating)));if(m!==o)return{reset:{placement:a[0]}};const A=[u[e(o)],u[E],u[k]],d=[...((y=f.autoPlacement)==null?void 0:y.overflows)||[],{placement:o,overflows:A}],w=a[i+1];if(w)return{data:{index:i+1,overflows:d},reset:{placement:w}};const v=d.map(e=>{const t=n(e.placement);return[e.placement,t&&S?e.overflows.slice(0,2).reduce((e,t)=>e+t,0):e.overflows[0],e.overflows]}).sort((e,t)=>e[1]-t[1]),T=v.filter(e=>e[2].slice(0,n(e[0])?2:3).every(e=>e<=0)),x=((j=T[0])==null?void 0:j[0])||v[0][0];return x!==m?{data:{index:i+1,overflows:d},reset:{placement:x}}:{}}}};function C(e){const t=l(e);return[d(e),t,d(t)]}function E(s,e,o){const t=["left","right"],n=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(s){case"top":case"bottom":return o?e?n:t:e?t:n;case"left":case"right":return e?i:a;default:return[]}}function k(s,i,a,r){const o=n(s);let t=E(e(s),a==="start",r);return o&&(t=t.map(e=>e+"-"+o),i&&(t=t.concat(t.map(d)))),t}const A=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(c){var j,h,f,w;const{placement:i,middlewareData:v,rects:T,initialPlacement:n,platform:m,elements:F}=c,{mainAxis:M=!0,crossAxis:S=!0,fallbackPlacements:p,fallbackStrategy:A="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:_=!0,...E}=s(t,c),x=e(i),O=e(n)===n,u=await(m.isRTL==null?void 0:m.isRTL(F.floating)),y=p||(O||!_?[l(n)]:C(n));!p&&b!=="none"&&y.push(...k(n,_,b,u));const z=[n,...y],d=await r(c,E),a=[];let o=((j=v.flip)==null?void 0:j.overflows)||[];if(M&&a.push(d[x]),S){const{main:e,cross:t}=g(i,T,u);a.push(d[e],d[t])}if(o=[...o,{placement:i,overflows:a}],!a.every(e=>e<=0)){const t=(((h=v.flip)==null?void 0:h.index)||0)+1,s=z[t];if(s)return{data:{index:t,overflows:o},reset:{placement:s}};let e=(f=o.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])==null?void 0:f.placement;if(!e)switch(A){case"bestFit":{const t=(w=o.map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])==null?void 0:w[0];t&&(e=t);break}case"initialPlacement":e=n;break}if(i!==e)return{reset:{placement:e}}}return{}}}};function _(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function p(e){return v.some(t=>e[t]>=0)}const F=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...o}=s(e,t);switch(i){case"referenceHidden":{const s=await r(t,{...o,elementContext:"reference"}),e=_(s,n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:p(e)}}}case"escaped":{const s=await r(t,{...o,altBoundary:!0}),e=_(s,n.floating);return{data:{escapedOffsets:e,escaped:p(e)}}}default:return{}}}}};function j(e){const t=a(...e.map(e=>e.left)),n=a(...e.map(e=>e.top)),s=o(...e.map(e=>e.right)),i=o(...e.map(e=>e.bottom));return{x:t,y:n,width:s-t,height:i-n}}function z(s){const n=s.slice().sort((e,t)=>e.y-t.y),e=[];let t=null;for(let o=0;o<n.length;o++){const s=n[o];!t||s.y-t.y>t.height/2?e.push([s]):e[e.length-1].push(s),t=s}return e.map(e=>c(j(e)))}const D=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(g){const{placement:h,elements:y,rects:d,platform:m,strategy:_}=g,{padding:O=2,x:p,y:f}=s(t,g),v=Array.from(await(m.getClientRects==null?void 0:m.getClientRects(y.reference))||[]),n=z(v),b=c(j(v)),l=u(O);function w(){if(n.length===2&&n[0].left>n[1].right&&p!=null&&f!=null)return n.find(e=>p>e.left-l.left&&p<e.right+l.right&&f>e.top-l.top&&f<e.bottom+l.bottom)||b;if(n.length>=2){if(i(h)==="x"){const t=n[0],s=n[n.length-1],a=e(h)==="top",o=t.top,r=s.bottom,i=a?t.left:s.left,c=a?t.right:s.right,l=c-i,d=r-o;return{top:o,bottom:r,left:i,right:c,width:l,height:d,x:i,y:o}}const m=e(h)==="left",c=o(...n.map(e=>e.right)),l=a(...n.map(e=>e.left)),s=n.filter(e=>m?e.left===l:e.right===c),r=s[0].top,d=s[s.length-1].bottom,t=l,u=c,f=u-t,p=d-r;return{top:r,bottom:d,left:t,right:u,width:f,height:p,x:t,y:r}}return b}const r=await m.getElementRects({reference:{getBoundingClientRect:w},floating:y.floating,strategy:_});return d.reference.x!==r.reference.x||d.reference.y!==r.reference.y||d.reference.width!==r.reference.width||d.reference.height!==r.reference.height?{reset:{rects:r}}:{}}}};async function I(f,b){const{placement:o,platform:l,elements:v}=f,g=await(l.isRTL==null?void 0:l.isRTL(v.floating)),p=e(o),m=n(o),h=i(o)==="x",c=["left","top"].includes(p)?-1:1,u=g&&h?-1:1,a=s(b,f);let{mainAxis:d,crossAxis:t,alignmentAxis:r}=typeof a=="number"?{mainAxis:a,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...a};return m&&typeof r=="number"&&(t=m==="end"?r*-1:r),h?{x:t*u,y:d*c}:{x:d*c,y:t*u}}const L=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){const{x:s,y:o}=n,t=await I(n,e);return{x:s+t.x,y:o+t.y,data:t}}}};function y(e){return e==="x"?"y":"x"}const P=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(c){const{x:m,y:p,placement:b}=c,{mainAxis:v=!0,crossAxis:g=!1,limiter:j={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},..._}=s(t,c),f={x:m,y:p},d=await r(c,_),a=i(e(b)),l=y(a);let o=f[a],n=f[l];if(v){const e=a==="y"?"top":"left",t=a==="y"?"bottom":"right",n=o+d[e],s=o-d[t];o=h(n,o,s)}if(g){const e=l==="y"?"top":"left",t=l==="y"?"bottom":"right",s=n+d[e],o=n-d[t];n=h(s,n,o)}const u=j.fn({...c,[a]:o,[l]:n});return{...u,data:{x:u.x-m,y:u.y-p}}}}},H=function(t){return t===void 0&&(t={}),{options:t,fn(d){const{x:w,y:_,placement:f,rects:n,middlewareData:h}=d,{offset:j=0,mainAxis:b=!0,crossAxis:v=!0}=s(t,d),p={x:w,y:_},o=i(f),a=y(o);let c=p[o],r=p[a];const u=s(j,d),l=typeof u=="number"?{mainAxis:u,crossAxis:0}:{mainAxis:0,crossAxis:0,...u};if(b){const e=o==="y"?"height":"width",t=n.reference[o]-n.floating[e]+l.mainAxis,s=n.reference[o]+n.reference[e]-l.mainAxis;c<t?c=t:c>s&&(c=s)}if(v){var m,g;const s=o==="y"?"width":"height",t=["top","left"].includes(e(f)),i=n.reference[a]-n.floating[s]+(t?((m=h.offset)==null?void 0:m[a])||0:0)+(t?0:l.crossAxis),c=n.reference[a]+n.reference[s]+(t?0:((g=h.offset)==null?void 0:g[a])||0)-(t?l.crossAxis:0);r<i?r=i:r>c&&(r=c)}return{[o]:c,[a]:r}}}},M=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(l){const{placement:y,rects:S,platform:b,elements:w}=l,{apply:A=()=>{},...k}=s(t,l),c=await r(l,k),m=e(y),d=n(y),E=i(y),x=E==="x",{width:u,height:h}=S.floating;let v,f;m==="top"||m==="bottom"?(v=m,f=d===(await(b.isRTL==null?void 0:b.isRTL(w.floating))?"start":"end")?"left":"right"):(f=m,v=d==="end"?"top":"bottom");const O=h-c[v],_=u-c[f],p=!l.middlewareData.shift;let g=O,j=_;if(x){const e=u-c.left-c.right;j=d||p?a(_,e):e}else{const e=h-c.top-c.bottom;g=d||p?a(O,e):e}if(p&&!d){const e=o(c.left,0),t=o(c.right,0),n=o(c.top,0),s=o(c.bottom,0);x?j=u-2*(e!==0||t!==0?e+t:o(c.left,c.right)):g=h-2*(n!==0||s!==0?n+s:o(c.top,c.bottom))}await A({...l,availableWidth:j,availableHeight:g});const C=await b.getDimensions(w.floating);return u!==C.width||h!==C.height?{reset:{rects:!0}}:{}}}};t.arrow=w,t.autoPlacement=x,t.computePosition=R,t.detectOverflow=r,t.flip=A,t.hide=F,t.inline=D,t.limitShift=H,t.offset=L,t.rectToClientRect=c,t.shift=P,t.size=M,Object.defineProperty(t,"__esModule",{value:!0})})